{% extends 'base.html' %} {% block content %}
<div class="container">
  {% if not pdf %}
  <div class="text-center">
    <h2 class="mb-4">No conversation selected</h2>
    <p>
      Please <a href="{{ url_for('index') }}">start a new conversation</a> by
      uploading a PDF file.
    </p>
  </div>
  {% else %}
  <div class="mb-4">
    <h4 class="fw-bold">Topic: {{ pdf.filename }}</h4>
    <p class="text-muted">{{ pdf.summary }}</p>
  </div>

  <div
    class="border p-3 mb-4 bg-white rounded"
    style="height: 400px; overflow-y: auto"
  >
    {% for msg in pdf.chat_history %}
    <div class="mb-3">
      <strong>{{ msg.sender|capitalize }}:</strong>
      <div class="ps-3">{{ msg.message }}</div>
    </div>
    {% else %}
    <p class="text-muted">No messages yet. Ask something about this PDF!</p>
    {% endfor %}
  </div>

  <form method="POST">
    <div class="input-group">
      <input
        type="text"
        name="message"
        class="form-control"
        placeholder="Ask something..."
        required
      />
      <button type="submit" class="btn btn-primary">Send</button>
    </div>
  </form>
  {% endif %}
</div>
{% endblock %}
